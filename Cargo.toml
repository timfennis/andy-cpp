[workspace]
resolver = "2"
members = ["andy-cpp-macros"]

[package]
name = "ndc"
version = "0.2.0"
edition = "2021"
authors = ["Tim Fennis <fennis.tim@gmail.com>"]
license = "MIT"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html
[lib]
name = "ndc_lib"
path = "src/lib.rs"

[profile.release]
debug = false # true for flamegraph, false otherwise
strip = true  # false for flamegraph, true otherwise
lto = true

[dependencies]
ahash = { version = "0.8.11", optional = true }
andy-cpp-macros = { path = "andy-cpp-macros" }
anyhow = "1.0.97"
clap = { version = "4.5.31", features = ["derive"] }
either = "1.14.0"
factorial = "0.4.0"
itertools = "0.14.0"
miette = { version = "7.5.0", features = ["fancy"] }
num = "0.4.3"
once_cell = "1.20.3"
ordered-float = "5.0.0"
owo-colors = "4.2.0"
rand = "0.9.0"
rand_chacha = "0.9.0"
regex = "1.11.1"
rustyline = { version = "15.0.0", optional = true, features = ["derive"] }
ryu = "1.0.20"
self_cell = "1.1.0"
serde = "1.0.218"
serde_json = { version = "1.0.140", features = ["arbitrary_precision"] }
thiserror = "2.0.12"

[dev-dependencies]
criterion = { version = "0.5.1", features = ["html_reports"] }

[features]
default = ["repl", "ahash"]
repl = ["dep:rustyline"]
ahash = ["dep:ahash"]

[[bench]]
name = "benchmark"
harness = false
